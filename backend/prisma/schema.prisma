datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           Int      @id @default(autoincrement())
  username     String   @unique
  passwordHash String
  name         String
  role         String
  createdAt    DateTime @default(now())
}

model Station {
  id            Int      @id @default(autoincrement())
  name          String
  address       String
  lat           Float
  lng           Float
  stock         Int
  price         Float
  officialPrice Float
  history       Json
  lastAudit     DateTime?
  status        String
  audits        Audit[]
}

model Audit {
  id            Int      @id @default(autoincrement())
  stationId     Int
  station       Station  @relation(fields: [stationId], references: [id])
  code          String
  status        String
  priceExpected Float
  priceReported Float
  dispenserOk   Boolean
  createdAt     DateTime @default(now())
}

model Complaint {
  id          Int      @id @default(autoincrement())
  stationName String
  type        String
  detail      String?
  photoUrl    String?
  status      String
  createdAt   DateTime @default(now())
}

model Report {
  id        Int      @id @default(autoincrement())
  period    String
  format    String
  createdAt DateTime @default(now())
  sizeMb    Float
  fileUrl   String?
  mimeType  String?
}
